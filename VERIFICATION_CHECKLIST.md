# Layui å¾Œå°ç®¡ç†ç³»çµ± - å¿«é€Ÿé©—è­‰æ¸…å–®

## âœ… ç³»çµ±å°±ç·’æª¢æŸ¥ (Pre-Launch Verification)

### 1ï¸âƒ£ æ–‡ä»¶çµæ§‹é©—è­‰

#### å‰ç«¯è³‡æº
- [x] `public/admin-system.html` - 829 è¡Œå®Œæ•´ HTML
- [x] `public/layui/layui.js` - Layui æ ¸å¿ƒåº«
- [x] `public/layui/css/layui.css` - Layui æ¨£å¼
- [x] `public/layui/font/` - åœ–æ¨™å­—é«”

#### å¾Œç«¯é…ç½®
- [x] `server/index.ts` - å·²é…ç½®éœæ…‹æ–‡ä»¶æœå‹™
- [x] `server/routes/admin.ts` - ç®¡ç† API è·¯ç”±
- [x] `server/middleware/auth.ts` - JWT èªè­‰

#### React çµ„ä»¶
- [x] `src/components/Pagination.tsx` - æ™ºèƒ½åˆ†é çµ„ä»¶
- [x] `src/pages/AdminDashboard.tsx` - å·²é›†æˆåˆ†é 

---

### 2ï¸âƒ£ ä¾è³´å’Œç’°å¢ƒé©—è­‰

#### NPM ä¾è³´
```bash
npm list express cors better-sqlite3
```

**é æœŸçµæœ**:
- express@4.21.2 âœ…
- cors@2.8.5 âœ…
- better-sqlite3@12.4.1 âœ…

#### Node å’Œ npm ç‰ˆæœ¬
```bash
node --version  # é æœŸ: v18+
npm --version   # é æœŸ: v9+
```

---

### 3ï¸âƒ£ æœå‹™å•Ÿå‹•é©—è­‰

#### å¾Œç«¯å•Ÿå‹•
```bash
npm run server
```

**é æœŸæˆåŠŸæ¨™èªŒ**:
```
Server running on port 3001
CORS enabled for: localhost:3000, localhost:5173, 192.168.1.35:3000
Health check available at: http://localhost:3001/api/health
```

#### å‰ç«¯å•Ÿå‹• (æ–°çµ‚ç«¯)
```bash
npm run dev
```

**é æœŸæˆåŠŸæ¨™èªŒ**:
```
Vite v6.x.x ready in xxx ms
âœ Local: http://localhost:3000
```

---

### 4ï¸âƒ£ API ç«¯é»é©—è­‰

#### å¥åº·æª¢æŸ¥
```bash
curl http://localhost:3001/api/health
```

**é æœŸéŸ¿æ‡‰**:
```json
{ "status": "ok" }
```

#### ç”¨æˆ¶åˆ—è¡¨ç«¯é»
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:3001/api/admin/users?page=1&limit=10"
```

**é æœŸéŸ¿æ‡‰**:
```json
{
  "users": [...],
  "total": 100004,
  "page": 1,
  "pageSize": 10
}
```

#### è¨‚å–®åˆ—è¡¨ç«¯é»
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:3001/api/admin/orders"
```

**é æœŸéŸ¿æ‡‰**:
```json
{
  "orders": [...]
}
```

---

### 5ï¸âƒ£ å‰ç«¯åŠŸèƒ½é©—è­‰

#### URL é©—è­‰
| URL | é æœŸ | ç‹€æ…‹ |
|-----|------|------|
| http://localhost:3001/admin-system.html | åŠ è¼‰ Layui å¾Œå° | ğŸ”„ å¾…é©—è­‰ |
| http://localhost:3001/layui/layui.js | è¿”å› Layui åº« | ğŸ”„ å¾…é©—è­‰ |
| http://localhost:3001/api/health | JSON éŸ¿æ‡‰ | ğŸ”„ å¾…é©—è­‰ |

#### åŠŸèƒ½æ¸¬è©¦
1. **é é¢åŠ è¼‰**
   - [ ] è¨ªå• admin-system.html é é¢å®Œæ•´åŠ è¼‰
   - [ ] æ²’æœ‰ 404 æˆ–ç¶²çµ¡éŒ¯èª¤
   - [ ] Layui CSS æ¨£å¼æ­£ç¢ºæ‡‰ç”¨

2. **å„€è¡¨æ¿**
   - [ ] çµ±è¨ˆå¡ç‰‡é¡¯ç¤ºæ­£ç¢º
   - [ ] ç”¨æˆ¶ç¸½æ•¸é¡¯ç¤º 100,004
   - [ ] è¨‚å–®æ•¸å’ŒåŒ…è£¹æ•¸æ­£ç¢º

3. **ç”¨æˆ¶ç®¡ç†**
   - [ ] åˆå§‹åŠ è¼‰ç¬¬ 1 é ç”¨æˆ¶ (10 æ¢)
   - [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
   - [ ] åˆ†é æŒ‰éˆ•å¯é»æ“Š
   - [ ] å¯è·³è½‰è‡³æŒ‡å®šé é¢
   - [ ] å¯é¸æ“‡æ¯é é¡¯ç¤º 10/20/30/50 æ¢

4. **é«˜ç´šåˆ†é æ¸¬è©¦**
   - [ ] è·³è½‰è‡³ç¬¬ 500 é  (åŸ·è¡Œæœ‰æ•ˆ)
   - [ ] è·³è½‰è‡³ç¬¬ 5000 é  (åŸ·è¡Œæœ‰æ•ˆ)
   - [ ] è·³è½‰è‡³ç¬¬ 10001 é  (æœ€å¾Œä¸€é )
   - [ ] é ç¢¼é¡¯ç¤ºç‚º "1...9999 10000 10001" æ ¼å¼
   - [ ] è¼¸å…¥ç„¡æ•ˆé è™Ÿæ™‚æç¤ºéŒ¯èª¤

5. **ç”¨æˆ¶æ“ä½œ**
   - [ ] å¯ç·¨è¼¯ç”¨æˆ¶ä¿¡æ¯
   - [ ] å¯åˆªé™¤ç”¨æˆ¶ (éœ€ç¢ºèª)
   - [ ] æ“ä½œå¾Œè¡¨æ ¼è‡ªå‹•åˆ·æ–°

6. **è¨‚å–®ç®¡ç†**
   - [ ] è¨‚å–®åˆ—è¡¨åŠ è¼‰æˆåŠŸ
   - [ ] è¨‚å–®ç‹€æ…‹é¡è‰²ç·¨ç¢¼æ­£ç¢º
   - [ ] è¨‚å–®è©³æƒ…ä¿¡æ¯å®Œæ•´

7. **ç³»çµ±è¨­ç½®å’Œé—œæ–¼**
   - [ ] è¨­ç½®é é¢åŠ è¼‰æˆåŠŸ
   - [ ] é—œæ–¼é é¢é¡¯ç¤ºç‰ˆæœ¬ä¿¡æ¯

---

### 6ï¸âƒ£ æ€§èƒ½é©—è­‰

#### åŠ è¼‰æ™‚é–“æ¸¬è©¦
1. **é¦–æ¬¡åŠ è¼‰æ™‚é–“**: < 2 ç§’ (ç›®æ¨™)
2. **ç”¨æˆ¶åˆ—è¡¨æŸ¥è©¢**: < 500 ms (ç›®æ¨™)
3. **åˆ†é åˆ‡æ›**: < 300 ms (ç›®æ¨™)
4. **æœç´¢åŠŸèƒ½**: < 1 ç§’ (ç›®æ¨™)

#### ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
1. æ‰“é–‹ F12 â†’ ç¶²çµ¡æ¨™ç±¤
2. æ¸…ç©ºå¿«å–ä¸¦ç¡¬åˆ·æ–° (Ctrl+Shift+Del + Ctrl+F5)
3. ç›£æ§ä»¥ä¸‹è«‹æ±‚:
   - [ ] `/admin-system.html` - è¼‰é«” HTML
   - [ ] `/layui/layui.js` - Layui åº«
   - [ ] `/layui/css/layui.css` - Layui æ¨£å¼
   - [ ] `/api/admin/users` - ç”¨æˆ¶ API
   - [ ] `/api/admin/orders` - è¨‚å–® API

---

### 7ï¸âƒ£ ç€è¦½å™¨å…¼å®¹æ€§æ¸¬è©¦

#### æ¸¬è©¦æ¸…å–®
| ç€è¦½å™¨ | ç‰ˆæœ¬ | åŠ è¼‰ | åŠŸèƒ½ | æ¨£å¼ | ç‹€æ…‹ |
|------|-----|------|------|------|------|
| Chrome | æœ€æ–° | âœ… | ğŸ”„ | ğŸ”„ | å¾…é©—è­‰ |
| Firefox | æœ€æ–° | âœ… | ğŸ”„ | ğŸ”„ | å¾…é©—è­‰ |
| Safari | æœ€æ–° | âœ… | ğŸ”„ | ğŸ”„ | å¾…é©—è­‰ |
| Edge | æœ€æ–° | âœ… | ğŸ”„ | ğŸ”„ | å¾…é©—è­‰ |
| ç§»å‹•Chrome | æœ€æ–° | âœ… | ğŸ”„ | ğŸ”„ | å¾…é©—è­‰ |

---

### 8ï¸âƒ£ èº«ä»½é©—è­‰æµç¨‹é©—è­‰

#### ç™»éŒ„å’Œä»¤ç‰Œæª¢æŸ¥
1. [ ] å…ˆåœ¨ä¸»æ‡‰ç”¨ç™»éŒ„ (http://localhost:3000-3002)
2. [ ] ç™»éŒ„æˆåŠŸå¾Œæª¢æŸ¥ localStorage:
   ```javascript
   // åœ¨ç€è¦½å™¨æ§åˆ¶å°é‹è¡Œ
   console.log(localStorage.getItem('token'));
   ```
   é æœŸ: é¡¯ç¤º JWT token å­—ç¬¦ä¸²
3. [ ] å°èˆªè‡³ admin-system.html
4. [ ] é©—è­‰èªè­‰æˆåŠŸ (æ•¸æ“šåŠ è¼‰)

#### API èªè­‰é©—è­‰
1. [ ] é–‹ç™¼è€…å·¥å…· â†’ ç¶²çµ¡ â†’ é¸ä¸­ä»»ä½• /api/ è«‹æ±‚
2. [ ] é»æ“Š"è«‹æ±‚é ­"æŸ¥çœ‹ Authorization é ­
3. [ ] é©—è­‰æ ¼å¼: `Bearer eyJhbGc...`

---

### 9ï¸âƒ£ æ•¸æ“šåº«é©—è­‰

#### ç”¨æˆ¶æ•¸æ“šç¢ºèª
```bash
# é€£æ¥åˆ°æ•¸æ“šåº«ä¸¦æŸ¥è©¢ç”¨æˆ¶æ•¸
# (æ ¹æ“šå¯¦ç¾æ–¹å¼èª¿æ•´)
```

**é æœŸçµæœ**:
- ç”¨æˆ¶ç¸½æ•¸: 100,004
- è¡¨çµæ§‹å®Œæ•´
- æ•¸æ“šå®Œæ•´æ€§ç„¡æ

#### æ¨£æœ¬æ•¸æ“šé©—è­‰
- [ ] ç¬¬ 1 é åŒ…å«ç”¨æˆ¶ ID 1-10
- [ ] æœ€å¾Œä¸€é  (ç¬¬ 10001) åŒ…å«ç”¨æˆ¶ ID 100001-100004
- [ ] æ‰€æœ‰ç”¨æˆ¶å­—æ®µæœ‰å€¼ (username, email, phone, etc.)

---

### ğŸ”Ÿ éŒ¯èª¤è™•ç†é©—è­‰

#### ç„¡æ•ˆè¼¸å…¥æ¸¬è©¦
1. [ ] è¼¸å…¥ç„¡æ•ˆé è™Ÿ (å¦‚ 99999)
   é æœŸ: æç¤ºéŒ¯èª¤ä¸¦ä¿ç•™ç•¶å‰é 
2. [ ] è¼¸å…¥éæ•¸å­—å­—ç¬¦
   é æœŸ: å¿½ç•¥æˆ–æç¤ºéŒ¯èª¤
3. [ ] æœç´¢ä¸å­˜åœ¨çš„ç”¨æˆ¶
   é æœŸ: è¿”å› 0 çµæœ

#### ç¶²çµ¡éŒ¯èª¤æ¨¡æ“¬
1. [ ] é—œé–‰å¾Œç«¯æœå‹™
   é æœŸ: é¡¯ç¤ºé€£æ¥éŒ¯èª¤
2. [ ] åˆ·æ–°é é¢
   é æœŸ: å„ªé›…é™ç´šæˆ–é‡è©¦

---

## ğŸš€ æœ€çµ‚æª¢æŸ¥æ¸…å–®

### éƒ¨ç½²å‰æº–å‚™
- [ ] æ‰€æœ‰æ–‡ä»¶å·²å‚™ä»½
- [ ] æ•¸æ“šåº«å‚™ä»½å®Œæˆ
- [ ] Git æäº¤å·²æ¨é€
- [ ] ç’°å¢ƒè®Šé‡é…ç½®æ­£ç¢º
- [ ] ä¾è³´ç‰ˆæœ¬ç›¸å®¹

### éƒ¨ç½²é©—è­‰
- [ ] å¾Œç«¯æœå‹™æˆåŠŸå•Ÿå‹•
- [ ] å‰ç«¯æœå‹™æˆåŠŸå•Ÿå‹•
- [ ] æ‰€æœ‰ API ç«¯é»éŸ¿æ‡‰æ­£å¸¸
- [ ] å‰ç«¯é é¢åŠ è¼‰æˆåŠŸ
- [ ] èªè­‰æµç¨‹æ­£å¸¸
- [ ] æ ¸å¿ƒåŠŸèƒ½å¯ç”¨

### æ€§èƒ½é©—è­‰
- [ ] é é¢åŠ è¼‰é€Ÿåº¦æ»¿è¶³è¦æ±‚
- [ ] API éŸ¿æ‡‰æ™‚é–“æ­£å¸¸
- [ ] æ²’æœ‰å…§å­˜æ³„æ¼ (ç›£æ§ä¸€æ®µæ™‚é–“)
- [ ] CPU ä½¿ç”¨ç‡æ­£å¸¸

### å®‰å…¨é©—è­‰
- [ ] CORS é…ç½®æ­£ç¢º
- [ ] JWT èªè­‰æœ‰æ•ˆ
- [ ] æ•æ„Ÿæ•¸æ“šä¸åœ¨å®¢æˆ¶ç«¯æš´éœ²
- [ ] æ²’æœ‰æ§åˆ¶å°è­¦å‘Šæˆ–éŒ¯èª¤

---

## ğŸ“‹ é©—è­‰åŸ·è¡Œè¨˜éŒ„

### åŸ·è¡Œæ—¥æœŸ: ___________
### åŸ·è¡Œäººå“¡: ___________

#### ç’°å¢ƒä¿¡æ¯
- Node ç‰ˆæœ¬: __________
- npm ç‰ˆæœ¬: __________
- æ¸¬è©¦ç€è¦½å™¨: __________

#### é©—è­‰çµæœ
- [ ] âœ… æ‰€æœ‰æª¢æŸ¥é€šé â†’ **æº–å‚™ç”Ÿç”¢éƒ¨ç½²**
- [ ] âš ï¸ éƒ¨åˆ†æª¢æŸ¥å¤±æ•— â†’ **éœ€è¦ä¿®å¾©**
- [ ] âŒ é—œéµæª¢æŸ¥å¤±æ•— â†’ **æš«åœéƒ¨ç½²**

#### å‚™è¨»
```
_________________________________________________________________

_________________________________________________________________

_________________________________________________________________
```

---

## ğŸ“ å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆåƒè€ƒ

### å¸¸è¦‹å•é¡Œé€ŸæŸ¥

| å•é¡Œ | ç—‡ç‹€ | æª¢æŸ¥é … | è§£æ±ºæ–¹æ¡ˆ |
|-----|-----|-------|---------|
| ç„¡æ³•è¨ªå• | 404 / ç©ºç™½ | æ–‡ä»¶å­˜åœ¨ | æª¢æŸ¥è·¯å¾‘å’Œéœæ…‹é…ç½® |
| API å¤±æ•— | 401 / 500 | èªè­‰ token | é‡æ–°ç™»éŒ„æˆ–æª¢æŸ¥ token éæœŸ |
| æ¨£å¼ç¼ºå¤± | UI ä¸å°é½ | Layui CSS | æ¸…é™¤ç·©å­˜æˆ–è¤‡è£½æ–‡ä»¶ |
| æ•¸æ“šä¸é¡¯ç¤º | ç©ºè¡¨æ ¼ | API é€£æ¥ | æª¢æŸ¥å¾Œç«¯æœå‹™ç‹€æ…‹ |
| åˆ†é éŒ¯èª¤ | é é¢é¡¯ç¤ºä¸ç•¶ | åˆ†é é‚è¼¯ | æª¢æŸ¥ç¸½é æ•¸è¨ˆç®— |

---

## âœ¨ æœ€ä½³å¯¦è¸å»ºè­°

1. **å®šæœŸå‚™ä»½**
   ```bash
   # æ¯æ—¥å‚™ä»½æ•¸æ“šåº«
   cp server/db.ts server/db.backup.ts
   ```

2. **ç›£æ§æ—¥èªŒ**
   ```bash
   # ç›£æ§å¾Œç«¯æ—¥èªŒ
   npm run server 2>&1 | tee server.log
   ```

3. **æ€§èƒ½ç›£æ§**
   - å®šæœŸæª¢æŸ¥ç€è¦½å™¨æ€§èƒ½åˆ†æ
   - ç›£æ§ API éŸ¿æ‡‰æ™‚é–“
   - è¿½è¹¤å…§å­˜ä½¿ç”¨æƒ…æ³

4. **å®‰å…¨æ›´æ–°**
   - å®šæœŸæª¢æŸ¥ npm ä¾è³´æ›´æ–°
   - åŸ·è¡Œ `npm audit` æª¢æŸ¥æ¼æ´
   - æ›´æ–°éæœŸçš„åº«

---

**é¡˜æª¢æŸ¥é †åˆ©ï¼ğŸ‰**

*æœ€å¾Œæ›´æ–°: 2024-02-22*
