<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¦•å°æµ·å³½å¿«é‹ - å¾Œå°ç®¡ç†ç³»çµ±</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "å¾®è½¯é›…é»‘", Arial, sans-serif;
            background-color: #f0f2f5;
        }

        .layui-layout {
            background-color: #fff;
        }

        /* é ‚éƒ¨å°èˆªæ¬„ */
        .layui-header {
            background-color: #012e7d;
            color: #fff;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-logo {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-logo i {
            font-size: 24px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .admin-info {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .admin-info i {
            font-size: 24px;
        }

        .logout-btn {
            background-color: #ff4444;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background-color: #dd0000;
        }

        /* å´é‚Šæ¬„ */
        .layui-side {
            background-color: #f0f0f0;
            width: 200px;
            position: fixed;
            left: 0;
            top: 60px;
            bottom: 0;
            overflow-y: auto;
            z-index: 999;
        }

        .layui-side-scroll {
            padding: 10px 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            color: #333;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            font-size: 14px;
        }

        .nav-item:hover {
            background-color: #e8e8e8;
            border-left-color: #012e7d;
        }

        .nav-item.active {
            background-color: #e3f2fd;
            border-left-color: #012e7d;
            color: #012e7d;
            font-weight: bold;
        }

        .nav-title {
            padding: 12px 20px;
            font-weight: bold;
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
            margin-top: 10px;
        }

        /* ä¸»å…§å®¹å€åŸŸ */
        .layui-body {
            margin-left: 200px;
            margin-top: 60px;
            padding: 20px;
            min-height: calc(100vh - 60px);
        }

        /* å¡ç‰‡æ¨£å¼ */
        .stats-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .stats-card-content {
            flex: 1;
        }

        .stats-card-title {
            color: #999;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .stats-card-number {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }

        .stats-card-icon {
            font-size: 48px;
            color: #f0f0f0;
        }

        /* è¡¨æ ¼å®¹å™¨ */
        .content-box {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .content-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        /* æœç´¢æ¬„ */
        .search-box {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-box input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-box button {
            padding: 8px 20px;
            background-color: #012e7d;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-box button:hover {
            background-color: #0a1f4f;
        }

        /* æ“ä½œæŒ‰éˆ• */
        .action-btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .action-btn.danger {
            color: #ff4444;
            border-color: #ff4444;
        }

        .action-btn.danger:hover {
            background-color: #ff4444;
            color: #fff;
        }

        /* åˆ†é æ¨£å¼ */
        .pagination-box {
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }

        .pagination-info {
            color: #999;
            font-size: 12px;
        }

        .pagination-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .page-btn {
            padding: 6px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .page-btn:hover:not(:disabled) {
            background-color: #f0f0f0;
        }

        .page-btn.active {
            background-color: #012e7d;
            color: #fff;
            border-color: #012e7d;
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* æ¨™ç±¤ */
        .layui-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            white-space: nowrap;
        }

        .badge-success {
            background-color: #4caf50;
            color: #fff;
        }

        .badge-warning {
            background-color: #ff9800;
            color: #fff;
        }

        .badge-danger {
            background-color: #f44336;
            color: #fff;
        }

        .badge-info {
            background-color: #2196f3;
            color: #fff;
        }

        /* æ¨¡æ…‹æ¡† */
        .layui-layer {
            z-index: 9999;
        }

        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {
            .layui-side {
                width: 0;
                z-index: -1;
            }

            .layui-body {
                margin-left: 0;
            }

            .stats-card {
                flex-direction: column;
                text-align: center;
            }

            .search-box {
                flex-direction: column;
            }

            .pagination-box {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* åŠ è¼‰ç‹€æ…‹ */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #012e7d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- é ‚éƒ¨å°èˆªæ¬„ -->
    <div class="layui-header" style="height: 60px;">
        <div class="header-logo">
            <span>ğŸ“¦</span>
            <span>æ¦•å°æµ·å³½å¿«é‹</span>
        </div>
        <div class="header-right">
            <div class="admin-info">
                <span id="adminName">ç®¡ç†å“¡</span>
                <i class="layui-icon layui-icon-user"></i>
            </div>
            <button class="logout-btn" onclick="handleLogout()">ç™»å‡º</button>
        </div>
    </div>

    <!-- å´é‚Šæ¬„å°èˆª -->
    <div class="layui-side">
        <div class="layui-side-scroll">
            <div class="nav-title">ä¸»èœå–®</div>
            <div class="nav-item active" onclick="switchTab('overview')">
                <i class="layui-icon layui-icon-dashboard"></i> å„€è¡¨æ¿
            </div>
            <div class="nav-item" onclick="switchTab('users')">
                <i class="layui-icon layui-icon-user"></i> æœƒå“¡ç®¡ç†
            </div>
            <div class="nav-item" onclick="switchTab('orders')">
                <i class="layui-icon layui-icon-unlink"></i> è¨‚å–®ç®¡ç†
            </div>
            <div class="nav-item" onclick="switchTab('parcels')">
                <i class="layui-icon layui-icon-cellphone"></i> åŒ…è£¹ç®¡ç†
            </div>
            
            <div class="nav-title">ç³»çµ±</div>
            <div class="nav-item" onclick="switchTab('settings')">
                <i class="layui-icon layui-icon-set"></i> ç³»çµ±è¨­ç½®
            </div>
            <div class="nav-item" onclick="switchTab('about')">
                <i class="layui-icon layui-icon-about"></i> é—œæ–¼ç³»çµ±
            </div>
        </div>
    </div>

    <!-- ä¸»å…§å®¹å€åŸŸ -->
    <div class="layui-body">
        <!-- å„€è¡¨æ¿ -->
        <div id="overview" class="tab-content">
            <h2 class="content-title">å„€è¡¨æ¿</h2>
            
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md3">
                    <div class="stats-card">
                        <div class="stats-card-content">
                            <div class="stats-card-title">æœƒå“¡ç¸½æ•¸</div>
                            <div class="stats-card-number" id="totalUsers">-</div>
                        </div>
                        <div class="stats-card-icon">ğŸ‘¥</div>
                    </div>
                </div>

                <div class="layui-col-md3">
                    <div class="stats-card">
                        <div class="stats-card-content">
                            <div class="stats-card-title">è¨‚å–®ç¸½æ•¸</div>
                            <div class="stats-card-number" id="totalOrders">-</div>
                        </div>
                        <div class="stats-card-icon">ğŸ“¦</div>
                    </div>
                </div>

                <div class="layui-col-md3">
                    <div class="stats-card">
                        <div class="stats-card-content">
                            <div class="stats-card-title">åŒ…è£¹ç¸½æ•¸</div>
                            <div class="stats-card-number" id="totalParcels">-</div>
                        </div>
                        <div class="stats-card-icon">ğŸ“­</div>
                    </div>
                </div>

                <div class="layui-col-md3">
                    <div class="stats-card">
                        <div class="stats-card-content">
                            <div class="stats-card-title">ç³»çµ±ç‹€æ…‹</div>
                            <div class="stats-card-number" style="color: #4caf50; font-size: 24px;">
                                <span class="layui-badge badge-success">æ­£å¸¸</span>
                            </div>
                        </div>
                        <div class="stats-card-icon">âœ“</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æœƒå“¡ç®¡ç† -->
        <div id="users" class="tab-content" style="display: none;">
            <h2 class="content-title">æœƒå“¡ç®¡ç†</h2>
            
            <div class="content-box">
                <div class="search-box">
                    <input type="text" id="userSearch" placeholder="æœå°‹æœƒå“¡ï¼šç”¨æˆ¶åã€æ‰‹æ©Ÿæˆ–éƒµç®±..." />
                    <button onclick="searchUsers()">æœå°‹</button>
                    <button onclick="resetUserSearch()" style="background-color: #999;">é‡ç½®</button>
                </div>

                <table id="userTable" class="layui-table" lay-filter="userTable" style="width: 100%;">
                    <thead>
                        <tr>
                            <th lay-data="{field:'id', width:80, align:'center'}">ID</th>
                            <th lay-data="{field:'username', width:120}">ç”¨æˆ¶å</th>
                            <th lay-data="{field:'phone', width:130}">æ‰‹æ©Ÿ</th>
                            <th lay-data="{field:'email', width:180}">éƒµç®±</th>
                            <th lay-data="{field:'real_name', width:100}">å§“å</th>
                            <th lay-data="{field:'address', width:200}">åœ°å€</th>
                            <th lay-data="{field:'created_at', width:140}">è¨»å†Šæ—¥æœŸ</th>
                            <th lay-data="{field:'action', width:100, align:'center', toolbar: '#userActions'}">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="userTableBody">
                        <!-- æ•¸æ“šç”± JavaScript å¡«å…… -->
                    </tbody>
                </table>

                <div class="pagination-box">
                    <div class="pagination-info">
                        é¡¯ç¤ºç¬¬ <span id="tableStart">1</span> åˆ° <span id="tableEnd">10</span> æ¢ï¼Œå…± 
                        <span id="totalCount">0</span> æ¢è¨˜éŒ„
                    </div>
                    <div class="pagination-controls">
                        <button class="page-btn" onclick="goToFirstPage()">é¦–é </button>
                        <button class="page-btn" onclick="goToPrevPage()">ä¸Šä¸€é </button>
                        
                        <div id="pageNumbers" style="display: flex; gap: 5px;"></div>
                        
                        <button class="page-btn" onclick="goToNextPage()">ä¸‹ä¸€é </button>
                        <button class="page-btn" onclick="goToLastPage()">æœ«é </button>
                        
                        <input type="number" id="jumpPage" min="1" style="width: 50px; padding: 6px; border: 1px solid #ddd; border-radius: 4px;" placeholder="è·³è½‰"/>
                        <button class="page-btn" onclick="jumpToPage()">è·³è½‰</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¨‚å–®ç®¡ç† -->
        <div id="orders" class="tab-content" style="display: none;">
            <h2 class="content-title">è¨‚å–®ç®¡ç†</h2>
            
            <div class="content-box">
                <table id="orderTable" class="layui-table" lay-filter="orderTable" style="width: 100%;">
                    <thead>
                        <tr>
                            <th lay-data="{field:'id', width:100, align:'center'}">è¨‚å–®ID</th>
                            <th lay-data="{field:'user_id', width:100}">æœƒå“¡ID</th>
                            <th lay-data="{field:'total_amount', width:120}">é‡‘é¡</th>
                            <th lay-data="{field:'status', width:100}">ç‹€æ…‹</th>
                            <th lay-data="{field:'created_at', width:140}">å»ºç«‹æ—¥æœŸ</th>
                            <th lay-data="{field:'action', width:120, align:'center'}">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="orderTableBody">
                        <!-- æ•¸æ“šç”± JavaScript å¡«å…… -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- åŒ…è£¹ç®¡ç† -->
        <div id="parcels" class="tab-content" style="display: none;">
            <h2 class="content-title">åŒ…è£¹ç®¡ç†</h2>
            
            <div class="content-box">
                <p style="color: #999; text-align: center; padding: 40px;">æº–å‚™ä¸­...</p>
            </div>
        </div>

        <!-- ç³»çµ±è¨­ç½® -->
        <div id="settings" class="tab-content" style="display: none;">
            <h2 class="content-title">ç³»çµ±è¨­ç½®</h2>
            
            <div class="content-box">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">ç³»çµ±åç¨±</label>
                    <input type="text" value="æ¦•å°æµ·å³½å¿«é‹ç®¡ç†ç³»çµ±" style="width: 100%; max-width: 400px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;" />
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">ç³»çµ±æè¿°</label>
                    <textarea style="width: 100%; max-width: 600px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 100px;">å°ˆæ¥­çš„é›†é‹ç‰©æµç®¡ç†ç³»çµ±ï¼Œç‚ºå®¢æˆ¶æä¾›é«˜æ•ˆã€å¯é çš„æœå‹™ã€‚</textarea>
                </div>

                <button class="search-box button" style="background-color: #4caf50; padding: 10px 20px; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    ä¿å­˜è¨­ç½®
                </button>
            </div>
        </div>

        <!-- é—œæ–¼ç³»çµ± -->
        <div id="about" class="tab-content" style="display: none;">
            <h2 class="content-title">é—œæ–¼ç³»çµ±</h2>
            
            <div class="content-box">
                <div style="text-align: center; padding: 40px;">
                    <h3 style="margin-bottom: 20px;">æ¦•å°æµ·å³½å¿«é‹ç®¡ç†ç³»çµ±</h3>
                    <p style="color: #666; margin-bottom: 10px;">ç‰ˆæœ¬: 2.0.0</p>
                    <p style="color: #999; margin-bottom: 20px;">å‰ç«¯æ¡†æ¶: React 19 + Layui v2.13.3</p>
                    <p style="color: #999;">Â© 2026 æ¦•å°æµ·å³½å¿«é‹ ç‰ˆæ¬Šæ‰€æœ‰</p>
                </div>
            </div>
        </div>
    </div>

    <!-- æ“ä½œæŒ‰éˆ•æ¨¡æ¿ -->
    <script type="text/html" id="userActions">
        <button class="action-btn" onclick="editUser({{d.id}})">ç·¨è¼¯</button>
        <button class="action-btn danger" onclick="deleteUser({{d.id}})">åˆªé™¤</button>
    </script>

    <!-- Layui è…³æœ¬ -->
    <script src="/layui/layui.js"></script>
    <script>
        // å…¨å±€è®Šé‡
        let currentPage = 1;
        let pageSize = 10;
        let totalPages = 1;
        let totalUsers = 0;
        let adminToken = localStorage.getItem('adminToken');

        // Layui åˆå§‹åŒ–
        layui.use(['table', 'form', 'layer', 'element'], function() {
            const table = layui.table;
            const form = layui.form;
            const layer = layui.layer;
            const element = layui.element;

            // åˆå§‹åŒ–ç®¡ç†å“¡ä¿¡æ¯
            const adminUser = localStorage.getItem('adminUser');
            if (adminUser) {
                const user = JSON.parse(adminUser);
                document.getElementById('adminName').textContent = user.username || 'ç®¡ç†å“¡';
            } else {
                window.location.href = '/admin/login';
            }

            // è¼‰å…¥çµ±è¨ˆæ•¸æ“š
            loadStats();
            
            // è¼‰å…¥æœƒå“¡æ•¸æ“š
            loadUsers();
        });

        // åˆ‡æ›é¸é …å¡
        function switchTab(tabName) {
            // éš±è—æ‰€æœ‰é¸é …å¡
            document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            
            // é¡¯ç¤ºé¸ä¸­çš„é¸é …å¡
            document.getElementById(tabName).style.display = 'block';
            event.target.closest('.nav-item').classList.add('active');

            // æ ¹æ“šé¸é …å¡åŠ è¼‰æ•¸æ“š
            if (tabName === 'users') {
                loadUsers();
            } else if (tabName === 'orders') {
                loadOrders();
            }
        }

        // è¼‰å…¥çµ±è¨ˆæ•¸æ“š
        async function loadStats() {
            try {
                const response = await fetch('http://localhost:3001/api/admin/users', {
                    headers: { Authorization: `Bearer ${adminToken}` }
                });
                const data = await response.json();
                
                document.getElementById('totalUsers').textContent = (data.pagination?.total || 0).toLocaleString();
                
                const ordersResponse = await fetch('http://localhost:3001/api/admin/orders', {
                    headers: { Authorization: `Bearer ${adminToken}` }
                });
                const ordersData = await ordersResponse.json();
                
                document.getElementById('totalOrders').textContent = (ordersData.pagination?.total || 0).toLocaleString();
            } catch (err) {
                console.error('Error loading stats:', err);
            }
        }

        // è¼‰å…¥æœƒå“¡æ•¸æ“š
        async function loadUsers() {
            try {
                const response = await fetch(`http://localhost:3001/api/admin/users?page=${currentPage}&limit=${pageSize}`, {
                    headers: { Authorization: `Bearer ${adminToken}` }
                });
                const data = await response.json();

                const users = data.data || [];
                totalUsers = data.pagination?.total || 0;
                totalPages = data.pagination?.pages || 1;

                // æ¸…ç©ºè¡¨æ ¼
                const tbody = document.getElementById('userTableBody');
                tbody.innerHTML = '';

                // å¡«å……è¡¨æ ¼æ•¸æ“š
                users.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td style="text-align: center;">${user.id}</td>
                        <td>${user.username}</td>
                        <td>${user.phone || '-'}</td>
                        <td>${user.email || '-'}</td>
                        <td>${user.real_name || '-'}</td>
                        <td>${user.address || '-'}</td>
                        <td>${new Date(user.created_at).toLocaleDateString('zh-TW')}</td>
                        <td style="text-align: center;">
                            <button class="action-btn" onclick="editUser(${user.id})">ç·¨è¼¯</button>
                            <button class="action-btn danger" onclick="deleteUser(${user.id})">åˆªé™¤</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                // æ›´æ–°åˆ†é ä¿¡æ¯
                updatePagination();
            } catch (err) {
                console.error('Error loading users:', err);
            }
        }

        // è¼‰å…¥è¨‚å–®æ•¸æ“š
        async function loadOrders() {
            try {
                const response = await fetch('http://localhost:3001/api/admin/orders', {
                    headers: { Authorization: `Bearer ${adminToken}` }
                });
                const data = await response.json();

                const orders = data.data || [];
                const tbody = document.getElementById('orderTableBody');
                tbody.innerHTML = '';

                orders.forEach(order => {
                    const statusBadge = getStatusBadge(order.status);
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td style="text-align: center;">${order.id}</td>
                        <td>${order.user_id}</td>
                        <td>$${order.total_amount.toFixed(2)} ${order.currency}</td>
                        <td>${statusBadge}</td>
                        <td>${new Date(order.created_at).toLocaleDateString('zh-TW')}</td>
                        <td style="text-align: center;">
                            <button class="action-btn" onclick="editOrder(${order.id})">è©³æƒ…</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            } catch (err) {
                console.error('Error loading orders:', err);
            }
        }

        // æ›´æ–°åˆ†é æ§ä»¶
        function updatePagination() {
            const start = (currentPage - 1) * pageSize + 1;
            const end = Math.min(currentPage * pageSize, totalUsers);

            document.getElementById('tableStart').textContent = start;
            document.getElementById('tableEnd').textContent = end;
            document.getElementById('totalCount').textContent = totalUsers.toLocaleString();

            // ç”Ÿæˆé ç¢¼æŒ‰éˆ•
            const pageNumbers = document.getElementById('pageNumbers');
            pageNumbers.innerHTML = '';

            const maxButtons = 5;
            const start_page = Math.max(1, currentPage - Math.floor(maxButtons / 2));
            const end_page = Math.min(totalPages, start_page + maxButtons - 1);

            for (let i = start_page; i <= end_page; i++) {
                const btn = document.createElement('button');
                btn.className = 'page-btn' + (i === currentPage ? ' active' : '');
                btn.textContent = i;
                btn.onclick = () => goToPage(i);
                pageNumbers.appendChild(btn);
            }
        }

        // åˆ†é å‡½æ•¸
        function goToPage(page) {
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                loadUsers();
            }
        }

        function goToFirstPage() { goToPage(1); }
        function goToPrevPage() { goToPage(currentPage - 1); }
        function goToNextPage() { goToPage(currentPage + 1); }
        function goToLastPage() { goToPage(totalPages); }

        function jumpToPage() {
            const page = parseInt(document.getElementById('jumpPage').value);
            if (page >= 1 && page <= totalPages) {
                goToPage(page);
                document.getElementById('jumpPage').value = '';
            } else {
                alert(`è«‹è¼¸å…¥ 1 åˆ° ${totalPages} ä¹‹é–“çš„é ç¢¼`);
            }
        }

        // æœå°‹æœƒå“¡
        function searchUsers() {
            const query = document.getElementById('userSearch').value.trim();
            if (!query) {
                loadUsers();
                return;
            }

            // é€™è£¡å¯ä»¥æ·»åŠ æœå°‹APIèª¿ç”¨
            alert('æœå°‹åŠŸèƒ½ï¼šæœå°‹: ' + query);
        }

        function resetUserSearch() {
            document.getElementById('userSearch').value = '';
            currentPage = 1;
            loadUsers();
        }

        // ç”¨æˆ¶æ“ä½œ
        function editUser(id) {
            alert('ç·¨è¼¯ç”¨æˆ¶ ID: ' + id);
        }

        function deleteUser(id) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤ç”¨æˆ¶å—ï¼Ÿ')) {
                fetch(`http://localhost:3001/api/admin/users/${id}`, {
                    method: 'DELETE',
                    headers: { Authorization: `Bearer ${adminToken}` }
                }).then(res => {
                    if (res.ok) {
                        alert('ç”¨æˆ¶å·²åˆªé™¤');
                        loadUsers();
                    }
                }).catch(err => console.error('åˆªé™¤å¤±æ•—:', err));
            }
        }

        function editOrder(id) {
            alert('æŸ¥çœ‹è¨‚å–®è©³æƒ… ID: ' + id);
        }

        // ç™»å‡º
        function handleLogout() {
            if (confirm('ç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿ')) {
                localStorage.removeItem('adminToken');
                localStorage.removeItem('adminUser');
                window.location.href = '/admin/login';
            }
        }

        // ç‹€æ…‹å¾½ç« 
        function getStatusBadge(status) {
            const badges = {
                'pending': '<span class="layui-badge badge-warning">å¾…è™•ç†</span>',
                'processing': '<span class="layui-badge badge-info">è™•ç†ä¸­</span>',
                'shipped': '<span class="layui-badge badge-info">å·²ç™¼è²¨</span>',
                'delivered': '<span class="layui-badge badge-success">å·²äº¤ä»˜</span>',
                'cancelled': '<span class="layui-badge badge-danger">å·²å–æ¶ˆ</span>'
            };
            return badges[status] || '<span class="layui-badge">' + status + '</span>';
        }
    </script>
</body>
</html>
